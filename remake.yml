## All R files that are used must be listed here:
sources:
  - R.scripts/data_cleaning.R
  - R.scripts/data_organizing.R
  - R.scripts/run_analyses.R
  - R.scripts/results.R
  
packages:
  - dplyr
  - magrittr
  - lubridate
  - tidyr
  - mvabund
  - ggplot2
  - lubridate
  - vegan
  - pryr

targets:
  all:
    depends: 
      - insect_ini
      - insect_fin
      - zoop_ini
      - zoop_fin
      - bact_1_ini
      - bact_1_fin
      - bact_2_ini
      - bact_2_fin
      - bact_3_ini
      - bact_3_fin
      - bact_4_ini
      - bact_4_fin
      - bact_5_ini
      - bact_5_fin
      - bact_list_ini

  insects:
    command: read_data("raw-data/insect.communities.table.txt")
  
  insectnames:
    command: read.csv("raw-data/insectnames.csv", stringsAsFactors=FALSE)
    
  blocks:
    command: read_data("raw-data/blocks.txt")
    
  bromeliad:
    command: read_data("raw-data/bromeliad.volumes.txt")

  inverts:
    command: clean_insect_names(insects, insectnames)
    quiet: true

  zoops:
    command: clean_zooplankton("raw-data/zoop.txt")
    
  bact_1:
    command: read_clean_bact("raw-data/bacteria/block1.csv")
        
  bact_2:
    command: read_clean_bact("raw-data/bacteria/block2.csv")
        
  bact_3:
    command: read_clean_bact("raw-data/bacteria/block3.csv")
        
  bact_4:
    command: read_clean_bact("raw-data/bacteria/block4.csv")
        
  bact_5:
    command: read_clean_bact("raw-data/bacteria/block5.csv")

  bact_list:
    command: list(bact_1, bact_2, bact_3, bact_4, bact_5)
    
  insect_ini:
    command: TaxaTimeSelector(.blocks = blocks, .bromeliad = bromeliad, .taxa = inverts, sampletime = I("initial"))
    
  insect_fin:
    command: TaxaTimeSelector(.blocks = blocks, .bromeliad = bromeliad, .taxa = inverts, sampletime = I("final"))
      
  zoop_ini:
    command: TaxaTimeSelector(.blocks = blocks, .bromeliad = bromeliad, .taxa = zoops, sampletime = I("initial"))
          
  zoop_fin:
    command: TaxaTimeSelector(.blocks = blocks, .bromeliad = bromeliad, .taxa = zoops, sampletime = I("final"))
    
  bact_list_ini:
    command: lapply_bact(bact_list, .blocks = blocks, .bromeliad = bromeliad, sampletime = I("initial"))   
    
  bact_1_ini: 
    command: BactTimeSelector(.blocks = blocks, .bromeliad = bromeliad, .taxa = bact_1, sampletime = I("initial"))   
    
  bact_1_fin:
    command: BactTimeSelector(.blocks = blocks, .bromeliad = bromeliad, .taxa = bact_1, sampletime = I("final"))
      
  bact_2_ini: 
    command: BactTimeSelector(.blocks = blocks, .bromeliad = bromeliad, .taxa = bact_2, sampletime = I("initial"))   
    
  bact_2_fin: 
    command: BactTimeSelector(.blocks = blocks, .bromeliad = bromeliad, .taxa = bact_2, sampletime = I("final"))
        
  bact_3_ini: 
    command: BactTimeSelector(.blocks = blocks, .bromeliad = bromeliad, .taxa = bact_3, sampletime = I("initial"))   
    
  bact_3_fin: 
    command: BactTimeSelector(.blocks = blocks, .bromeliad = bromeliad, .taxa = bact_3, sampletime = I("final"))
    
  bact_4_ini: 
    command: BactTimeSelector(.blocks = blocks, .bromeliad = bromeliad, .taxa = bact_4, sampletime = I("initial"))   
    
  bact_4_fin: 
    command: BactTimeSelector(.blocks = blocks, .bromeliad = bromeliad, .taxa = bact_4, sampletime = I("final"))
      
  bact_5_ini: 
    command: BactTimeSelector(.blocks = blocks, .bromeliad = bromeliad, .taxa = bact_5, sampletime = I("initial"))   
    
  bact_5_fin:
    command: BactTimeSelector(.blocks = blocks, .bromeliad = bromeliad, .taxa = bact_5, sampletime = I("final"))
  
#  bactlist:
#    command: Select_bact_list_initial(.blocks = blocks, .bromeliad = bromeliad, .bact_list = bact_list_clean2)

#  list_initial:
#    command: InsectZooBactAbds(.insectlist = insectlist, .zooplist = zooplist, .bactlist = bactlist)
  
#  adonis_initial:
#    command: runadonis(list_initial)
